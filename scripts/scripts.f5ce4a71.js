"use strict";angular.module("demoApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","pascalprecht.translate"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl",controllerAs:"contact"}).otherwise({redirectTo:"/"})}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"i18/",suffix:".json"}).preferredLanguage("en").useSanitizeValueStrategy("escaped")}]),angular.module("demoApp").controller("ContactCtrl",function(){}),angular.module("demoApp").controller("MainCtrl",function(){}),angular.module("demoApp").directive("loader",function(){return{templateUrl:"scripts/directives/_loader/loader.html",restrict:"E",replace:!0,scope:{},controller:["$scope","$rootScope",function(a,b){a.isLoading=!1;var c=b.$on("startLoading",function(){a.isLoading=!0}),d=b.$on("stopLoading",function(){a.isLoading=!1});b.$on("$destroy",function(){c(),d()})}]}}),angular.module("demoApp").directive("clickOut",["$document","$timeout",function(a,b){return{link:function(c,d,e){var f=function(b){var g=$(d).has(b.target).length>0,h=d[0]===b.target,i=g||h;i||(c.$apply(e.clickOut),a.unbind("click",f))};b(function(){a.bind("click",f)},500)}}}]),angular.module("demoApp").directive("langSwitcher",function(){return{templateUrl:"scripts/directives/lang-switcher/lang-switcher.html",restrict:"E",replace:!0,controller:["$scope","$translate",function(a,b){a.changeLanguage=function(c){b.use(c),a.defaultLanuage=window.localStorage.lang=c},a.defaultLanuage=window.localStorage.lang||b.preferredLanguage(),a.defaultLanuage&&a.changeLanguage(a.defaultLanuage)}]}}),angular.module("demoApp").directive("navigation",function(){return{templateUrl:"scripts/directives/navigation/navigation.html",restrict:"E",replace:!0,controller:["$scope","$location",function(a,b){var c=b.path();a.$watch(function(){return c},function(){a.page=c}),a.openPage=function(c){a.page=c,b.url(c)}}]}}),angular.module("demoApp").directive("noteElement",function(){return{templateUrl:"scripts/directives/note-list/note-element/note-element.html",restrict:"E",replace:!0,scope:{note:"=",notes:"="},controller:["$scope","$filter","$rootScope","notesAPI",function(a,b,c,d){var e=function(){d.updateNote(a.note.id,a.note.title).then(function(a){console.log(JSON.stringify(a))})};a.isEdit=!1,a.showEditor=function(){a.isEdit=!0},a.hideEditor=function(){a.isEdit=!1,e()},a.catchEnter=function(b){13===b.keyCode&&a.hideEditor()},a.deleteNote=function(){window.confirm(b("translate")("del_confirm"))&&(c.$emit("startLoading"),d.deleteNote(a.note.id).then(function(b){console.log(JSON.stringify(b)),c.$emit("stopLoading"),angular.isArray(a.notes)&&a.notes.map(function(b,c){b.id===a.note.id&&a.notes.splice(c,1)})},function(a){c.$emit("stopLoading")}))}}]}}),angular.module("demoApp").directive("noteList",function(){return{templateUrl:"scripts/directives/note-list/note-list.html",restrict:"E",replace:!0,controller:["$scope","$rootScope","notesAPI",function(a,b,c){b.$emit("startLoading"),a.isAddNew=!1,c.getList().then(function(c){angular.isObject(c)&&(a.notes=c.data),b.$emit("stopLoading")},function(a){b.$emit("stopLoading"),console.log(JSON.stringify(a))}),a.addNewNote=function(){a.hideAddNewNote(),a.newNote&&(b.$emit("startLoading"),c.addNote({title:a.newNote.toString()}).then(function(c){console.log(JSON.stringify(c)),angular.isObject(c)&&angular.isObject(c.data)&&a.notes.push(c.data),b.$emit("stopLoading")},function(a){b.$emit("stopLoading"),console.log(JSON.stringify(a))}))},a.showAddNewNote=function(){a.isAddNew=!0},a.hideAddNewNote=function(){a.isAddNew=!1},a.getNote=function(a){angular.isNumber(a)&&c.getNote(a).then(function(a){console.log(JSON.stringify(a))})}}]}}),angular.module("demoApp").factory("notesAPI",["$http",function(a){var b="http://private-9aad-note10.apiary-mock.com";return{getList:function(){return a.get(b+"/notes")},getNote:function(c){return a.get(b+"/notes/"+c)},addNote:function(c){return a.post(b+"/notes",c)},updateNote:function(c,d){return a.put(b+"/notes/"+c,d)},deleteNote:function(c){return a["delete"](b+"/notes/"+c)}}}]),angular.module("demoApp").run(["$templateCache",function(a){a.put("scripts/directives/_loader/loader.html","<div class=loader ng-if=isLoading><div class=backdrop></div><img src=/images/loader2.gif></div>"),a.put("scripts/directives/lang-switcher/lang-switcher.html","<div class=lang-switcher><div class=btn-group role=group><button type=button class=\"btn btn-default\" ng-click=\"changeLanguage('en')\" ng-class=\"{ 'active' : defaultLanuage === 'en' }\">EN</button> <button type=button class=\"btn btn-default\" ng-click=\"changeLanguage('cz')\" ng-class=\"{ 'active' : defaultLanuage === 'cz' }\">CZ</button></div></div>"),a.put("scripts/directives/navigation/navigation.html",'<div class=header><div class="navbar navbar-default" role=navigation><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#js-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="#/">Demo</a></div><div class="collapse navbar-collapse" id=js-navbar-collapse><ul class="nav navbar-nav"><li ng-class="{ \'active\' : page === \'/\'}"><a href="" ng-click="openPage(\'/\')">{{ \'notes\' | translate }}</a></li><li ng-class="{ \'active\' : page === \'/contact\'}"><a href="" ng-click="openPage(\'/contact\')">{{ \'contact\' | translate }}</a></li></ul><lang-switcher></lang-switcher></div></div></div></div>'),a.put("scripts/directives/note-list/note-element/note-element.html",'<div class=note-element ng-dblclick=showEditor()><div class="del-btn pull-right" title="{{ \'del\' | translate }}" ng-click=deleteNote() ng-show=!isEdit><span class="glyphicon glyphicon-remove"></span></div><span class=title ng-show=!isEdit>{{ note.title }}</span><textarea class=editor ng-model=note.title ng-keypress=catchEnter($event) click-out=hideEditor() ng-if=isEdit></textarea></div>'),a.put("scripts/directives/note-list/note-list.html",'<div class=note-list><div class="btn btn-success add" ng-click=showAddNewNote() ng-show=!isAddNew><span class="glyphicon glyphicon-plus-sign" title="{{ \'add\' | translate }}"></span> {{ \'add\' | translate }}</div><textarea class=new-note ng-model=newNote ng-show=isAddNew></textarea><div class=btn-group role=group ng-show=isAddNew><button type=button class="btn btn-warning left" title="{{ \'cancel\' | translate }}" ng-click=hideAddNewNote()><span class="glyphicon glyphicon-remove"></span></button> <button type=button class="btn btn-success right" title="{{ \'add\' | translate }}" ng-click=addNewNote()><span class="glyphicon glyphicon-ok"></span></button></div><note-element notes=notes note=note ng-repeat="note in notes | orderBy:\'-id\'"></note-element><div class=dblclick><span class="glyphicon glyphicon-edit"></span> {{ \'dblclick\' | translate }}</div></div>'),a.put("views/contact.html","<div class=contact><div class=jumbotron><h2>{{ 'author' | translate }}</h2><p class=lead><img src=images/vt.png alt=\"I'm Yeoman\"><br><br>+420 776 883 655</p><p><a ng-href=mailto:vladimir@troyanenko.com>vladimir@troyanenko.com</a></p></div></div>"),a.put("views/main.html","<div class=jumbotron><h1>{{ 'notes' | translate }}</h1><note-list></note-list></div>")}]);